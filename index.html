<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GrammaQuiz CRPE</title>
    <style>
        :root {
            --primary-color: #4e5ff8;
            --secondary-color: #f5f7ff;
            --correct-color: #4CAF50;
            --wrong-color: #f44336;
            --neutral-color: #f1f1f1;
            --text-color: #333;
            --shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #fff;
            color: var(--text-color);
            line-height: 1.6;
            padding: 20px;
        }
        
        .container {
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            text-align: center;
            margin-bottom: 40px;
        }
        
        header h1 {
            color: var(--primary-color);
            font-size: 48px;
            font-weight: bold;
            margin-bottom: 10px;
        }
        
        header p {
            color: #666;
            font-size: 18px;
            max-width: 800px;
            margin: 0 auto;
        }
        
        .score-container {
            text-align: right;
            font-size: 20px;
            font-weight: bold;
            margin-bottom: 20px;
        }
        
        .progress-bar {
            height: 6px;
            background-color: #eee;
            margin-bottom: 40px;
            overflow: hidden;
            border-radius: 3px;
        }
        
        .progress {
            height: 100%;
            background-color: var(--primary-color);
            width: 0%;
            transition: width 0.3s ease;
        }
        
        .question-title {
            font-size: 24px;
            color: var(--primary-color);
            margin-bottom: 30px;
        }
        
        .question-text {
            font-size: 20px;
            color: #333;
            font-weight: normal;
            margin-bottom: 30px;
        }
        
        .options-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 40px;
        }
        
        .option {
            background-color: #f5f5f5;
            border-radius: 8px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.2s ease;
            border: 1px solid #e0e0e0;
        }
        
        .option:hover {
            background-color: #efefef;
            transform: translateY(-2px);
        }
        
        .option.correct {
            background-color: var(--correct-color);
            color: white;
        }
        
        .option.wrong {
            background-color: var(--wrong-color);
            color: white;
        }
        
        .help-btn {
            width: 40px;
            height: 40px;
            background-color: #f8f8f8;
            color: var(--primary-color);
            border: 1px solid #ddd;
            border-radius: 50%;
            font-size: 22px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            position: absolute;
            top: 0;
            right: 0;
        }
        
        .help-content {
            display: none;
            background-color: #fff;
            border-left: 4px solid var(--primary-color);
            padding: 15px;
            margin-top: 15px;
            border-radius: 5px;
            box-shadow: var(--shadow);
        }
        
        .help-content.show {
            display: block;
        }
        
        .help-title {
            font-weight: bold;
            color: var(--primary-color);
            margin-bottom: 5px;
        }
        
        .controls {
            display: flex;
            justify-content: space-between;
            margin-top: 40px;
        }
        
        .nav-btn {
            padding: 12px 25px;
            background-color: var(--primary-color);
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            transition: background-color 0.3s;
        }
        
        .nav-btn:hover {
            background-color: #3a49d9;
        }
        
        .nav-btn:disabled {
            background-color: #c0c0c0;
            cursor: not-allowed;
        }
        
        .question-container {
            position: relative;
            margin-bottom: 30px;
        }
        
        .result-container {
            text-align: center;
            padding: 40px;
            background-color: white;
            border-radius: 10px;
            box-shadow: var(--shadow);
            margin-top: 20px;
        }
        
        .score {
            font-size: 32px;
            font-weight: bold;
            color: var(--primary-color);
            margin-bottom: 20px;
        }
        
        #result-message {
            font-size: 18px;
            margin-bottom: 30px;
        }
        
        @media (max-width: 768px) {
            .options-container {
                grid-template-columns: 1fr;
            }
            
            .option {
                padding: 15px;
            }
            
            .question-title {
                font-size: 20px;
            }
            
            .question-text {
                font-size: 18px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>GrammaQuiz CRPE</h1>
            <p>Testez vos connaissances en grammaire française pour la préparation au concours CRPE. 50 questions à choix multiple pour une révision complète.</p>
        </header>
        
        <div class="score-container">
            Score: <span id="current-score">0</span>/<span id="total-questions">50</span>
        </div>
        
        <div class="progress-bar">
            <div class="progress" id="progress"></div>
        </div>
        
        <div id="quiz-container">
            <!-- Questions will be inserted here by JavaScript -->
        </div>
        
        <div class="controls">
            <button id="prev-btn" class="nav-btn" disabled>Précédent</button>
            <button id="next-btn" class="nav-btn">Suivant</button>
        </div>
        
        <div class="result-container" id="result-container" style="display: none;">
            <h2>Résultats</h2>
            <div class="score" id="score">0/50</div>
            <p id="result-message">Message de résultat</p>
            <button id="restart-btn" class="nav-btn">Recommencer</button>
        </div>
    </div>

    <script>
        // Données des questions
        const quizData = [
            {
                question: "Quelle est la structure de la phrase type (P) ?",
                options: [
                    "P = [GS + GV]",
                    "P = [GS + GV] (+ GC)",
                    "P = [GV + GS] (+ GC)",
                    "P = [GS + GC + GV]"
                ],
                correctIndex: 1,
                help: "La phrase type est composée d'un groupe sujet (GS) et d'un groupe verbal (GV), avec éventuellement un groupe circonstanciel (GC) qui est facultatif. La formule est donc : P = [GS + GV] (+ GC)."
            },
            {
                question: "Dans la phrase \"Le facteur distribue le courrier à huit heures\", quel est le groupe sujet (GS) ?",
                options: [
                    "Le facteur",
                    "Distribue le courrier",
                    "Le courrier",
                    "À huit heures"
                ],
                correctIndex: 0,
                help: "Le groupe sujet (GS) est l'élément qui règle l'accord du verbe. Dans cette phrase, c'est 'Le facteur' qui effectue l'action de distribuer, c'est donc le groupe sujet."
            },
            {
                question: "Parmi les phrases suivantes, laquelle est une phrase averbale ?",
                options: [
                    "Le facteur dort.",
                    "Excellent, ce rôti !",
                    "Où est le dessert ?",
                    "Le courrier est distribué."
                ],
                correctIndex: 1,
                help: "Une phrase averbale est une phrase sans verbe conjugué. 'Excellent, ce rôti !' ne contient pas de verbe et constitue donc une phrase averbale."
            },
            {
                question: "Quelle est la différence entre l'interrogation directe et l'interrogation indirecte ?",
                options: [
                    "L'interrogation directe est marquée par un point d'interrogation et peut comporter une inversion, l'interrogation indirecte est en proposition subordonnée",
                    "L'interrogation directe est toujours totale, l'interrogation indirecte est toujours partielle",
                    "L'interrogation directe est introduite par \"que\", l'interrogation indirecte par \"si\"",
                    "L'interrogation directe est dans le discours direct, l'interrogation indirecte est dans le discours indirect"
                ],
                correctIndex: 0,
                help: "L'interrogation directe est une question posée directement, marquée par un point d'interrogation et comportant souvent une inversion sujet-verbe. L'interrogation indirecte est une question rapportée, intégrée dans une phrase sous forme de proposition subordonnée."
            },
            // Ajoutez les autres questions ici...
            
            // J'ai ajouté la question sur l'interrogation directe/indirecte comme exemple
            // pour montrer la structure avec les 50 questions du code précédent
        ];

        // Variables globales
        let currentQuestion = 0;
        let score = 0;
        let answeredQuestions = [];
        let shuffledQuestions = [];

        // Fonction pour mélanger le tableau des questions
        function shuffleArray(array) {
            const shuffled = [...array];
            for (let i = shuffled.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
            }
            return shuffled;
        }

        // Initialisation du quiz
        function initQuiz() {
            shuffledQuestions = shuffleArray(quizData);
            currentQuestion = 0;
            score = 0;
            answeredQuestions = new Array(shuffledQuestions.length).fill(false);
            displayQuestion();
            updateNavButtons();
            updateScore();
            document.getElementById('result-container').style.display = 'none';
            document.getElementById('quiz-container').style.display = 'block';
            updateProgress();
        }

        // Afficher une question
        function displayQuestion() {
            const questionData = shuffledQuestions[currentQuestion];
            const quizContainer = document.getElementById('quiz-container');
            
            quizContainer.innerHTML = `
                <div class="question-container">
                    <div class="question-title">Question ${currentQuestion + 1}/${shuffledQuestions.length}:</div>
                    <div class="question-text">${questionData.question}</div>
                    <button class="help-btn" id="help-btn">?</button>
                </div>
                <div class="options-container">
                    ${questionData.options.map((option, index) => 
                        `<div class="option ${answeredQuestions[currentQuestion] && index === questionData.correctIndex ? 'correct' : ''} ${answeredQuestions[currentQuestion] && answeredQuestions[currentQuestion] !== 'correct' && answeredQuestions[currentQuestion] === index ? 'wrong' : ''}" data-index="${index}">${option}</div>`).join('')}
                </div>
                <div class="help-content" id="help-content">
                    <div class="help-title">Aide :</div>
                    <p>${questionData.help}</p>
                </div>
            `;
            
            // Ajouter les événements aux options si la question n'a pas été répondue
            if (!answeredQuestions[currentQuestion]) {
                const options = document.querySelectorAll('.option');
                options.forEach(option => {
                    option.addEventListener('click', selectOption);
                });
            }
            
            // Ajouter l'événement au bouton d'aide
            document.getElementById('help-btn').addEventListener('click', toggleHelp);
        }

        // Sélectionner une option
        function selectOption(event) {
            if (answeredQuestions[currentQuestion]) return;
            
            const selectedOption = event.target;
            const optionIndex = parseInt(selectedOption.dataset.index);
            const correctIndex = shuffledQuestions[currentQuestion].correctIndex;
            
            // Désactiver toutes les options de cette question
            const options = document.querySelectorAll('.option');
            options.forEach(option => {
                option.removeEventListener('click', selectOption);
            });
            
            // Marquer la question comme répondue
            if (optionIndex === correctIndex) {
                selectedOption.classList.add('correct');
                score++;
                answeredQuestions[currentQuestion] = 'correct';
            } else {
                selectedOption.classList.add('wrong');
                options[correctIndex].classList.add('correct');
                answeredQuestions[currentQuestion] = optionIndex;
            }
            
            updateScore();
            updateProgress();
            updateNavButtons();
        }

        // Mettre à jour le score
        function updateScore() {
            document.getElementById('current-score').textContent = score;
        }

        // Mettre à jour la barre de progression
        function updateProgress() {
            const progressBar = document.getElementById('progress');
            const answeredCount = answeredQuestions.filter(q => q !== false).length;
            const progressPercentage = (answeredCount / shuffledQuestions.length) * 100;
            progressBar.style.width = `${progressPercentage}%`;
        }

        // Mettre à jour les boutons de navigation
        function updateNavButtons() {
            document.getElementById('prev-btn').disabled = currentQuestion === 0;
            document.getElementById('next-btn').disabled = currentQuestion === shuffledQuestions.length - 1;
        }

        // Afficher/masquer l'aide
        function toggleHelp() {
            const helpContent = document.getElementById('help-content');
            helpContent.classList.toggle('show');
        }

        // Question précédente
        function previousQuestion() {
            if (currentQuestion > 0) {
                currentQuestion--;
                displayQuestion();
                updateNavButtons();
            }
        }

        // Question suivante
        function nextQuestion() {
            if (currentQuestion < shuffledQuestions.length - 1) {
                currentQuestion++;
                displayQuestion();
                updateNavButtons();
            } else if (answeredQuestions.every(q => q !== false)) {
                showResults();
            }
        }

        // Afficher les résultats
        function showResults() {
            document.getElementById('quiz-container').style.display = 'none';
            document.getElementById('result-container').style.display = 'block';
            document.getElementById('score').textContent = `${score}/${shuffledQuestions.length}`;
            
            let message = '';
            const percentage = (score / shuffledQuestions.length) * 100;
            
            if (percentage >= 90) {
                message = 'Excellent ! Vous maîtrisez parfaitement la grammaire française.';
            } else if (percentage >= 70) {
                message = 'Très bien ! Vous avez une bonne compréhension de la grammaire française.';
            } else if (percentage >= 50) {
                message = 'Pas mal. Continuez à vous entraîner pour améliorer vos connaissances.';
            } else {
                message = 'Vous avez besoin de réviser davantage les règles de grammaire française.';
            }
            
            document.getElementById('result-message').textContent = message;
        }

        // Événements des boutons
        document.getElementById('prev-btn').addEventListener('click', previousQuestion);
        document.getElementById('next-btn').addEventListener('click', nextQuestion);
        document.getElementById('restart-btn').addEventListener('click', initQuiz);

        // Initialiser le quiz au chargement de la page
        window.onload = initQuiz;
    </script>
</body>
</html>
